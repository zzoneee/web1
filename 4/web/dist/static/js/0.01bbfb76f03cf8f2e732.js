webpackJsonp([0],{T8r6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mtWM"),o=a.n(s);function n(){return o()({method:"get",url:"/api/experiment/exLists",headers:{Authorization:window.localStorage.tea_Authorization}})}function i(){return o()({method:"get",url:"/api/classes/classesLists",headers:{Authorization:window.localStorage.tea_Authorization}})}function r(t,e,a){return o()({method:"get",url:"/api/report/StuReportMsgLists",headers:{Authorization:window.localStorage.tea_Authorization},params:{classesID:t,exID:e,OP:a}})}var l={data:function(){return{tableData:[],ReportDetailVisible:!1,ReportDetailTableData:[],cur_index:0,cur_groupName:"实验一",PostOptions:[],PostOptionsValue:"",PostOptionsClass:[],PostOptionsValueClass:"",searchBtn3:0}},created:function(){var t=this;n().then(function(e){200==e.data.status?(t.PostOptions=e.data.data,t.PostOptionsValue=t.PostOptions[0].id,t.getClassesLists()):403==e.data.status&&t.$router.replace("/tea_error")}).catch(function(t){console.log(t)})},methods:{getStuReportMsgLists:function(){var t=this;console.log(878),r(this.PostOptionsValueClass,this.PostOptionsValue,this.searchBtn3).then(function(e){200==e.data.status?t.tableData=e.data.data:403==e.data.status&&t.$router.replace("/tea_error")}).catch(function(t){console.log(t)})},getClassesLists:function(){var t=this;i().then(function(e){200==e.data.status?(t.PostOptionsClass=e.data.data,t.PostOptionsValueClass=t.PostOptionsClass[0].id,t.getStuReportMsgLists()):403==e.data.status&&t.$router.replace("/tea_error")}).catch(function(t){console.log(t)})},getteaReportList:function(t,e,a){var s=this;this.$axios({method:"get",url:"/api/teacher/reportDetail",params:{groupName:e[t].group,reportNum:a}}).then(function(t){200==t.status&&(s.ReportDetailTableData=t.data.data,s.ReportDetailTableData.forEach(function(t){-1==t.system_score&&(t.system_score="暂无评分"),-1==t.hp_score&&(t.hp_score="暂无评分")}))}).catch(function(t){console.log(t)})},GroupNumberDetail:function(t,e){var a=this;this.GroupNumberDetailVisible=!0,this.$axios({method:"get",url:"/api/teacher/groupNumberDetail",params:{groupName:e[t].name}}).then(function(t){200==t.status&&(a.GroupNumberDetailTableData=t.data.data,a.allTableData=t.data.data,a.password=t.data.password)}).catch(function(t){console.log(t)})},ReportDetail:function(t,e){this.ReportDetailVisible=!0,this.getteaReportList(t,e,this.PostOptionsValue),this.cur_index=t,this.cur_groupName=this.PostOptionsValue},handleClose:function(){},handleJudge:function(t,e){var a=this;this.$prompt("请输入给该团队的评分","评分",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var o=s.value;o<=100&&o>0?a.$axios({method:"post",url:"/api/teacher/teaReportMark",data:{userId:window.localStorage.tea_userId,id:e[t].id,score:o}}).then(function(t){200==t.status&&(a.getteaReportList(a.cur_index,a.tableData,a.cur_groupName),a.$message({type:"success",message:"评分成功"}))}).catch(function(t){console.log(t)}):a.$message({type:"warning",message:"输入不合法"})}).catch(function(){a.$message({type:"info",message:"取消输入"})})},downLoadReport:function(t,e){this.$axios({method:"get",url:"/api/teacher/getReportUrl",params:{id:e[t].id}}).then(function(t){if(200==t.status){var e="http://47.111.151.229/downLoad/report/"+t.data.data;window.open(e)}}).catch(function(t){console.log(t)})},PostOptionsChange:function(t){this.getStuReportMsgLists()},PostOptionsChangeClass:function(t){this.getStuReportMsgLists()},search3:function(){this.searchBtn3=(this.searchBtn3+1)%3,this.getStuReportMsgLists()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"rc"}},[a("div",{staticClass:"plane_table"},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"520",border:"",id:"tb","header-cell-style":t.tableHeaderColor}},[a("el-table-column",{attrs:{align:"center",prop:"stu_num",label:"学号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"姓名",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"group",label:"团队",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"role",label:"承担角色",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"hasReport1",label:"实验报告"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.tableData[e.$index].hasReport?a("el-button",{staticClass:"download",attrs:{size:"mini"},on:{click:function(a){return t.ReportDetail(e.$index,t.tableData)}}},[t._v("查看实验报告详情并评分")]):t._e(),t._v(" "),0==t.tableData[e.$index].hasReport?a("p",[t._v("未提交")]):t._e()]}}])})],1)],1),t._v(" "),a("el-col",{attrs:{span:5,offset:1}},[a("el-select",{attrs:{placeholder:""},on:{change:function(e){return t.PostOptionsChange(t.PostOptionsValue)}},model:{value:t.PostOptionsValue,callback:function(e){t.PostOptionsValue=e},expression:"PostOptionsValue"}},t._l(t.PostOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-select",{staticClass:"PostOptionsValueClass",attrs:{placeholder:""},on:{change:function(e){return t.PostOptionsChangeClass(t.PostOptionsValueClass)}},model:{value:t.PostOptionsValueClass,callback:function(e){t.PostOptionsValueClass=e},expression:"PostOptionsValueClass"}},t._l(t.PostOptionsClass,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),0==t.searchBtn3?a("el-button",{staticClass:"searchBtn3",attrs:{type:"danger",icon:"el-icon-search"},on:{click:function(e){return t.search3()}}},[t._v("搜索未提交")]):t._e(),t._v(" "),1==t.searchBtn3?a("el-button",{staticClass:"searchBtn3",attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){return t.search3()}}},[t._v("搜索已提交")]):t._e(),t._v(" "),2==t.searchBtn3?a("el-button",{staticClass:"searchBtn3",attrs:{type:"primary"},on:{click:function(e){return t.search3()}}},[t._v("显示全部信息")]):t._e()],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{customClass:"dialog_ReportDetail",title:"实验报告",visible:t.ReportDetailVisible,"append-to-body":!0},on:{"update:visible":function(e){t.ReportDetailVisible=e},closed:t.handleClose}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ReportDetailTableData,height:"400",border:"",id:"GroupNumberDetailTable"}},[a("el-table-column",{attrs:{align:"center",prop:"create_time",label:"日期",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"system_score",label:"系统评分",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"hp_score",label:"团队互评平均分",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"url",label:"实验报告"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"download",attrs:{size:"mini"},on:{click:function(a){return t.downLoadReport(e.$index,t.ReportDetailTableData)}}},[t._v("下载")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"teacher_score",label:"教师评分"},scopedSlots:t._u([{key:"default",fn:function(e){return[-1!=t.ReportDetailTableData[e.$index].teacher_score?a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:9,offset:3}},[a("p",[t._v(t._s(t.ReportDetailTableData[e.$index].teacher_score))])]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleJudge(e.$index,t.ReportDetailTableData)}}},[t._v("重新评分")])],1)],1):t._e(),t._v(" "),-1==t.ReportDetailTableData[e.$index].teacher_score?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.handleJudge(e.$index,t.ReportDetailTableData)}}},[t._v("评分")]):t._e()]}}])})],1)],1)],1)},staticRenderFns:[]};a.d(e,"get_exLists",function(){return n}),a.d(e,"get_classesLists",function(){return i}),a.d(e,"get_StuReportMsgLists",function(){return r});var u=a("VU/8")(l,c,!1,function(t){a("lbwy"),a("h/X3")},"data-v-8eed3374",null);e.default=u.exports},"h/X3":function(t,e){},lbwy:function(t,e){}});
//# sourceMappingURL=0.01bbfb76f03cf8f2e732.js.map